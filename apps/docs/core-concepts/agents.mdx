---
title: "Agents"
description: "AI agents that coordinate actions to achieve goals"
---

# Agents

Agents are the core building blocks of SpinAI. They combine your chosen LLM with actions to solve tasks the way a human decision maker would. This document outlines the process of creating new agent types and instances, detailing their configurations and capabilities.

## Agent Types

The SpinAI framework supports the creation of various agent types to cater to different needs and functionalities. Each agent type is defined by its configuration, including the instructions it follows, the actions it can perform, and the language model it uses for decision-making.

## Creating Agents

Creating an agent involves specifying its behavior and operational parameters. The `createAgent` function is used to instantiate a new agent with a given configuration.

### Defining a New Agent Type

To define a new agent type, you must specify the agent's configuration. This includes the instructions for the agent, the actions it can perform, and the language model it uses.

```typescript
import { AgentConfig, createAgent } from "spinai/src/agents";
import { LanguageModelV1 } from "ai";
import { Action } from "spinai/src/actions";

// Define the configuration for a new agent type
const agentConfig: AgentConfig = {
  instructions: "You are a helpful shopping assistant",
  model: LanguageModelV1,
  actions: [/* Array of actions the agent can perform */],
};
```

### Creating a New Agent Instance

Once you have defined the agent type, you can create an instance of the agent by passing the configuration to the `createAgent` function.

```typescript
// Create an instance of the agent
const shoppingAgent = createAgent(agentConfig);

// Use the agent
const { response } = await shoppingAgent({
  input: "Order me a medium red t-shirt under $30",
});
```

## Configuration Options

### Agent Creation Parameters

The `AgentConfig` interface outlines the parameters required to create a new agent.

```typescript
interface AgentConfig {
  instructions: string;
  model: LanguageModelV1;
  actions: Action[];
  agentId?: string;
  spinApiKey?: string;
}
```

- `instructions`: The guidelines that dictate the agent's behavior.
- `model`: The language model used for decision-making.
- `actions`: An array of actions the agent can perform.
- `agentId` (optional): A unique identifier for the agent in the SpinAI dashboard.
- `spinApiKey` (optional): API key for SpinAI dashboard integration.

### Agent Execution Parameters

The `AgentRunConfig` interface specifies the parameters for executing an agent instance.

```typescript
interface AgentRunConfig {
  input: string;
  maxSteps?: number;
  sessionId?: string;
  externalCustomerId?: string;
  state?: Record<string, any>;
  isRerun?: boolean;
  actions?: Action[];
  model?: LanguageModelV1;
  debug?: DebugMode;
  agentId?: string;
  spinApiKey?: string;
}
```

- `input`: The user input or task description.
- Additional parameters control execution behavior, such as `maxSteps` for the maximum number of steps the agent should take, and `sessionId` for maintaining context across interactions.

### Return Values

The `AgentResponse` interface describes the structure of the agent's response.

```typescript
interface AgentResponse<T = unknown> {
  response: T;
  sessionId: string;
  interactionId: string;
  totalDurationMs: number;
  totalCostCents: number;
  state: Record<string, unknown>;
  messages: Messages;
}
```

- `response`: The agent's response, typed if a response format is provided.
- `sessionId` and `interactionId`: Unique identifiers for the conversation and specific interaction, respectively.
- `totalDurationMs` and `totalCostCents`: Metrics on the execution's duration and cost.
- `state`: The final state after execution.

## Use Cases

Agents can be tailored for various use cases, from simple query responses to complex, stateful interactions. Here are some examples:

### 1. Basic Agent

A simple agent that responds to queries:

```typescript
const agent = createAgent({
  instructions: "You are a helpful assistant",
  actions: [/* Array of actions */],
  model: LanguageModelV1,
});

const { response } = await agent({
  input: "How do I reset my password?",
});
```

### 2. Structured Responses (Response Format)

An agent that returns typed data, useful for structured responses:

```typescript
// Define the response format
interface OrderStatus {
  orderId: string;
  status: "pending" | "shipped" | "delivered";
  estimatedDelivery?: string;
}

const orderAgent = createAgent<OrderStatus>({
  instructions: "Track order status",
  actions: [/* Array of actions */],
  model: LanguageModelV1,
});
```

### 3. Dashboard Integration

An agent with monitoring enabled for dashboard integration:

```typescript
const agent = createAgent({
  instructions: "Handle customer support",
  actions: [/* Array of actions */],
  model: LanguageModelV1,
  spinApiKey: process.env.SPINAI_API_KEY,
  agentId: "support-agent",
});
```

### 4. Session Management with Reruns

Agents can maintain context across interactions, allowing for session management and reruns:

```typescript
// Initial interaction
const { response, sessionId, state } = await agent({
  input: "Create a ticket for my broken laptop",
});

// Follow-up interaction
const { response: updatedResponse } = await agent({
  sessionId: sessionId,
  input: "Add that it's a MacBook Pro",
  state: state,
});
```

## Next Steps

<CardGroup>
  <Card title="Actions" icon="puzzle-piece" href="/core-concepts/actions">
    Learn about creating actions
  </Card>
  <Card title="Task Loop" icon="arrows-spin" href="/core-concepts/task-loop">
    Understand how agents make decisions
  </Card>
</CardGroup>